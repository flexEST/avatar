<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Audio Assistant</title>
  <style>
    body {
      margin: 0;
      background-color: black;
    }

    #avatarContainer {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      z-index: 1000;
    }

    video {
      width: 100%;
      border-radius: 12px;
      outline: none;
    }

    /* Hide everything else */
    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<div id="avatarContainer">
  <video id="idleVideo" autoplay loop muted playsinline>
    <source src="videos/idle.mp4" type="video/mp4">
    Brauzeriniz videonu dəstəkləmir.
  </video>
</div>

<!-- Hidden Audio Elements -->
<audio id="greetingAudio" src="audio/greeting.mp3"></audio>
<audio id="option1Audio" src="audio/option1.mp3"></audio>
<audio id="option2Audio" src="audio/option2.mp3"></audio>
<audio id="option3Audio" src="audio/option3.mp3"></audio>
<audio id="option4Audio" src="audio/option4.mp3"></audio>

<script>
  const greetingAudio = document.getElementById("greetingAudio");
  const idleVideo = document.getElementById("idleVideo");

  const optionAudios = {
    "1": document.getElementById("option1Audio"),
    "2": document.getElementById("option2Audio"),
    "3": document.getElementById("option3Audio"),
    "4": document.getElementById("option4Audio")
  };

  let isGreetingPlayed = false;

  function playGreeting() {
    const avatarContainer = document.getElementById("avatarContainer");

    const greetingVideo = document.createElement("video");
    greetingVideo.src = "videos/greeting.mp4";
    greetingVideo.autoplay = true;
    greetingVideo.playsInline = true;
    greetingVideo.muted = false;
    greetingVideo.style.width = "100%";
    greetingVideo.style.borderRadius = "12px";

    avatarContainer.innerHTML = '';
    avatarContainer.appendChild(greetingVideo);

    greetingVideo.onended = () => {
      avatarContainer.innerHTML = '';
      avatarContainer.appendChild(idleVideo);
      idleVideo.play();
    };
  }

  window.addEventListener("keydown", (e) => {
    if (e.key.toLowerCase() === 'f' && !isGreetingPlayed) {
      isGreetingPlayed = true;
      playGreeting();
      greetingAudio.play();
    } else if (["1", "2", "3", "4"].includes(e.key)) {
      const audio = optionAudios[e.key];
      if (audio) {
        audio.currentTime = 0;
        audio.play();
      }
    }
  });
</script>

</body>
</html>
