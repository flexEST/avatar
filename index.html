<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Virtual Assistant</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      overflow-x: hidden;
    }

    .avatar-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      height: auto;
      z-index: 999;
    }

    .avatar-video {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    .text-overlay {
      position: absolute;
      bottom: -60px;
      left: 0;
      width: 100vw;
      text-align: center;
      color: black;
      font-size: 22px;
      padding: 12px;
      animation: fadeIn 2s ease-in-out, typing 3s steps(40, end);
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid black;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100vw; }
    }

    .buttons, .extra-buttons, .final-buttons {
      display: none;
      text-align: center;
      margin-top: 20px;
    }

    .buttons button, .extra-buttons button, .final-buttons button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 8px;
      border: none;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }

    .buttons button:hover, .extra-buttons button:hover, .final-buttons button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

<div class="avatar-container">
  <video id="avatarVideo" class="avatar-video" autoplay muted playsinline>
    <source src="videos/girl_idle.mp4" type="video/mp4">
    Brauzeriniz video dəstəkləmir.
  </video>
  <audio id="voicePlayer" src="voice/hello.mp3"></audio>
  <div class="text-overlay" id="typewriterText"></div>
  <div class="buttons" id="buttons">
    <button onclick="handleChoice('kitablar')">Kitablar haqqında öyrənmək istəyirəm</button>
    <button onclick="handleChoice('sayt')">Sayt haqqında öyrənmək istəyirəm</button>
  </div>
  <div class="extra-buttons" id="extraButtons">
    <button onclick="showFinal()">Sonlandır</button>
    <button onclick="showMore()">Başqa şeylər haqqında öyrən</button>
  </div>
  <div class="final-buttons" id="finalButtons">
    <button>Seçim 1</button>
    <button>Seçim 2</button>
    <button>Seçim 3</button>
    <button>Seçim 4</button>
  </div>
</div>

<script>
  const textElement = document.getElementById("typewriterText");
  const buttons = document.getElementById("buttons");
  const extraButtons = document.getElementById("extraButtons");
  const finalButtons = document.getElementById("finalButtons");
  const video = document.getElementById("avatarVideo");
  const voice = document.getElementById("voicePlayer");

  function speak(text, audioSrc) {
    textElement.innerHTML = text;
    voice.src = audioSrc;
    video.src = "videos/girl_talking.mp4";
    voice.play();
    voice.onended = () => {
      video.src = "videos/girl_idle.mp4";
    };
  }

  function handleChoice(choice) {
    if (choice === 'kitablar') {
      speak("Əla seçim! Kitablar haqqında danışaq...", "voice/sample.mp3");
    } else if (choice === 'sayt') {
      speak("Sayt haqqında məlumat verirəm...", "voice/sample.mp3");
    }
    buttons.style.display = "none";
    setTimeout(() => extraButtons.style.display = "block", 3000);
  }

  function showFinal() {
    extraButtons.style.display = "none";
    finalButtons.style.display = "block";
  }

  function showMore() {
    extraButtons.style.display = "none";
    finalButtons.style.display = "block";
  }

  window.onload = () => {
    setTimeout(() => {
      speak("Salam, sizə necə kömək edə bilərəm?", "voice/hello.mp3");
      setTimeout(() => {
        buttons.style.display = "block";
      }, 3000);
    }, 1000);
  };
</script>

</body>
</html>
