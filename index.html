<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Virtual Assistant</title>
  <style>
    body {
      margin: 0;
      background-color: white;
    }

    #assistantContainer {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 220px;
      height: auto;
      display: none;
      z-index: 1000;
    }

    video {
      width: 100%;
      height: auto;
      border-radius: 12px;
    }
  </style>
</head>
<body>

  <div id="assistantContainer">
    <video id="assistantVideo" autoplay muted playsinline></video>
  </div>

  <audio id="audioPlayer"></audio>

  <script>
    const assistantContainer = document.getElementById('assistantContainer');
    const assistantVideo = document.getElementById('assistantVideo');
    const audioPlayer = document.getElementById('audioPlayer');

    const videos = {
      idle: 'videos/idle.mp4',
      talking: 'videos/talking.mp4'
    };

    const audios = {
      f: 'audio/greeting.mp3',
      1: 'audio/audio1.mp3',
      2: 'audio/audio2.mp3',
      3: 'audio/audio3.mp3',
      4: 'audio/audio4.mp3',
      5: 'audio/audio5.mp3'
    };

    function playVideo(src, loop = true, muted = true) {
      assistantVideo.src = src;
      assistantVideo.loop = loop;
      assistantVideo.muted = muted;
      assistantVideo.play();
    }

    function playInteraction(key) {
      const audioSrc = audios[key];
      if (!audioSrc) return;

      assistantContainer.style.display = 'block';
      playVideo(videos.talking, true, true); // talking video, muted
      audioPlayer.src = audioSrc;
      audioPlayer.play();

      audioPlayer.onended = () => {
        playVideo(videos.idle, true, true); // return to idle
      };
    }

    document.addEventListener('keydown', (e) => {
      const key = e.key.toLowerCase();
      if (audios.hasOwnProperty(key)) {
        playInteraction(key);
      }
    });
  </script>
</body>
</html>
